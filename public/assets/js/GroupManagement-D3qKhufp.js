/* empty css             *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                        *//* empty css                  */import{k as P,av as Q,aw as H,a as f,l as C,J as E,K as a,S as l,Q as m,L as _,d as W,m as X,p as I,R as $,T as z,P as A,F as Y}from"./vue-vendor-BPxk_gY3.js";import{i as U}from"./index-PNpWQo2V.js";/* empty css                   *//* empty css                     */import{E as S,b as R,c as Z,r as T,e as h,d as q,k as ee,v as O,m as te,o as le,u as ae}from"./element-plus-vendor-C_pH9kLN.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./other-vendor-DRuaNSIU.js";const ne=u=>U.post("/admin/group",u),ue=u=>U.get(`/admin/group?page=${u.page}&size=${u.size}`),se=u=>U.patch(`/admin/group/${u.id}`,u),de=u=>U.delete("/admin/group",{data:{group_ids:[u.id]}}),ie=u=>U.delete("/admin/group",{data:{group_ids:u}}),pe=P({__name:"AddGroup",props:{modelValue:{},modelModifiers:{}},emits:Q(["getGroups"],["update:modelValue"]),setup(u,{emit:i}){const b=i,y=H(u,"modelValue"),g=f(!1),s=f({name:"",count:0,size:0}),p=f(null),M={name:[{required:!0,message:"请输入组名",trigger:"blur"}],count:[{required:!0,message:"请输入可解析文件个数",trigger:"blur"}],size:[{required:!0,message:"请输入可解析大小",trigger:"blur"}]},x=async V=>{if(!(!V||!await V.validate()))try{g.value=!0,await ne(s.value),S.success("添加成功")}finally{g.value=!1}},F=V=>{b("getGroups"),V()},D=()=>{y.value=!1,b("getGroups")};return(V,n)=>{const G=R,k=Z,o=T,t=h,c=q,r=ee,B=O;return C(),E(r,{title:"添加用户组",width:"60%",modelValue:y.value,"onUpdate:modelValue":n[5]||(n[5]=d=>y.value=d),"before-close":F},{footer:a(()=>[l(c,{type:"info",onClick:n[3]||(n[3]=d=>D())},{default:a(()=>n[6]||(n[6]=[m("取消")])),_:1}),l(c,{type:"primary",onClick:n[4]||(n[4]=d=>x(p.value))},{default:a(()=>n[7]||(n[7]=[m("添加")])),_:1})]),default:a(()=>[_((C(),E(t,{ref_key:"addGroupFormRef",ref:p,model:s.value,rules:M,"label-width":"auto"},{default:a(()=>[l(k,{label:"组名",prop:"name"},{default:a(()=>[l(G,{modelValue:s.value.name,"onUpdate:modelValue":n[0]||(n[0]=d=>s.value.name=d)},null,8,["modelValue"])]),_:1}),l(k,{label:"可解析文件个数",prop:"count"},{default:a(()=>[l(o,{modelValue:s.value.count,"onUpdate:modelValue":n[1]||(n[1]=d=>s.value.count=d)},null,8,["modelValue"])]),_:1}),l(k,{label:"可解析大小",prop:"size"},{default:a(()=>[l(o,{modelValue:s.value.size,"onUpdate:modelValue":n[2]||(n[2]=d=>s.value.size=d)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[B,g.value]])]),_:1},8,["modelValue"])}}}),re=P({__name:"GroupManagement",setup(u){const i=f(!1),b=f(15),y=f(1),g=f(),s=f([]),p=async()=>{try{i.value=!0;const o=await ue({page:y.value,size:b.value});g.value=o.data}finally{i.value=!1}},M=async o=>{o.edit=!(o.edit??!1)},x=async o=>{o.edit=!(o.edit??!0),await F(o)},F=async o=>{try{i.value=!0,await se(o),S.success("修改用户组成功")}finally{i.value=!1,await p()}},D=async o=>{try{i.value=!0,await de(o),S.success("删除用户组成功")}finally{i.value=!1,await p()}},V=async()=>{try{i.value=!0;const o=s.value.map(t=>t.id);await ie(o),S.success("批量删除用户组成功")}finally{i.value=!1,await p()}},n=o=>s.value=o;W(p);const G=f(!1),k=()=>G.value=!G.value;return(o,t)=>{var L,N,w;const c=q,r=te,B=R,d=T,j=le,J=ae,K=O;return C(),X(Y,null,[l(pe,{onGetGroups:p,modelValue:G.value,"onUpdate:modelValue":t[0]||(t[0]=e=>G.value=e)},null,8,["modelValue"]),l(c,{type:"primary",onClick:t[1]||(t[1]=e=>p())},{default:a(()=>t[6]||(t[6]=[m("刷新列表")])),_:1}),l(c,{type:"primary",onClick:t[2]||(t[2]=e=>k())},{default:a(()=>t[7]||(t[7]=[m("添加用户组")])),_:1}),l(c,{type:"danger",disabled:s.value.length<=0,onClick:t[3]||(t[3]=e=>V())},{default:a(()=>t[8]||(t[8]=[m(" 批量删除 ")])),_:1},8,["disabled"]),_((C(),E(j,{data:((L=g.value)==null?void 0:L.data)??[],border:"","show-overflow-tooltip":"",class:"table",onSelectionChange:n},{default:a(()=>[l(r,{type:"selection",width:"40"}),l(r,{prop:"id",label:"ID"}),l(r,{prop:"name",label:"组名"},{default:a(({row:e})=>[_(I("span",null,$(e.name),513),[[z,!e.edit]]),_(l(B,{modelValue:e.name,"onUpdate:modelValue":v=>e.name=v},null,8,["modelValue","onUpdate:modelValue"]),[[z,e.edit]])]),_:1}),l(r,{prop:"count",label:"可解析文件数量"},{default:a(({row:e})=>[_(I("span",null,$(e.count),513),[[z,!e.edit]]),_(l(d,{modelValue:e.count,"onUpdate:modelValue":v=>e.count=v},null,8,["modelValue","onUpdate:modelValue"]),[[z,e.edit]])]),_:1}),l(r,{prop:"size",label:"可解析大小"},{default:a(({row:e})=>[_(I("span",null,$(e.size),513),[[z,!e.edit]]),_(l(d,{modelValue:e.size,"onUpdate:modelValue":v=>e.size=v},null,8,["modelValue","onUpdate:modelValue"]),[[z,e.edit]])]),_:1}),l(r,{prop:"created_at",label:"创建时间"},{default:a(({row:e})=>[m($(new Date(e.created_at).toLocaleString()),1)]),_:1}),l(r,{prop:"updated_at",label:"更新时间"},{default:a(({row:e})=>[m($(new Date(e.updated_at).toLocaleString()),1)]),_:1}),l(r,{width:"150",label:"操作",fixed:"right"},{default:a(({row:e})=>[e.edit?A("",!0):(C(),E(c,{key:0,size:"small",type:"primary",onClick:v=>M(e)},{default:a(()=>t[9]||(t[9]=[m(" 编辑 ")])),_:2},1032,["onClick"])),e.edit?(C(),E(c,{key:1,size:"small",type:"primary",onClick:v=>x(e)},{default:a(()=>t[10]||(t[10]=[m(" 保存 ")])),_:2},1032,["onClick"])):A("",!0),l(c,{size:"small",type:"danger",onClick:v=>D(e)},{default:a(()=>t[11]||(t[11]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[K,i.value]]),l(J,{"current-page":y.value,"onUpdate:currentPage":t[4]||(t[4]=e=>y.value=e),"page-size":b.value,"onUpdate:pageSize":t[5]||(t[5]=e=>b.value=e),"page-sizes":[15,50,100,500,((N=g.value)==null?void 0:N.total)??100],total:((w=g.value)==null?void 0:w.total)??100,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:p,onCurrentChange:p},null,8,["current-page","page-size","page-sizes","total"])],64)}}}),Se=oe(re,[["__scopeId","data-v-6ac724f9"]]);export{Se as default};
