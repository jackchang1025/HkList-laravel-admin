/* empty css             *//* empty css                   *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                 */import{k as F,a as d,m as L,L as R,J as x,K as a,at as B,l as _,p as f,u as v,R as C,S as o,aa as c,Q as w}from"./vue-vendor-BPxk_gY3.js";import{g as $,a as K,l as N,s as S,b as I}from"./index-PNpWQo2V.js";import{f as q}from"./favicon-BrYC5Vmz.js";import{a as D,v as U,E as A,b as J,c as M,d as Q,e as T}from"./element-plus-vendor-C_pH9kLN.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./other-vendor-DRuaNSIU.js";const z={class:"container"},G=["src"],H=F({__name:"LoginView",setup(O){const n=B();$()==="1"&&n.push("/admin");const y=()=>n.push("/register"),u=d(!1),t=d({username:"",password:""}),l=d(null),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},i=async m=>{if(!(!m||!await m.validate()))try{u.value=!0;const e=await N({username:t.value.username,password:t.value.password});A.success("登陆成功"),S("1");const r=e.data.role;I(r),n.push(`/${r}`)}finally{u.value=!1}};return(m,e)=>{const r=J,p=M,g=Q,b=T,k=D,E=U;return _(),L("div",z,[R((_(),x(k,null,{default:a(()=>[f("h1",null,[f("img",{src:v(q),alt:"logo"},null,8,G)]),f("h2",null,"登陆 | "+C(v(K)()),1),o(b,{ref_key:"loginFormRef",ref:l,model:t.value,rules:V,"label-width":"auto"},{default:a(()=>[o(p,{label:"用户名",prop:"username"},{default:a(()=>[o(r,{modelValue:t.value.username,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.username=s),onKeyup:e[1]||(e[1]=c(s=>i(l.value),["enter"]))},null,8,["modelValue"])]),_:1}),o(p,{label:"密码",prop:"password"},{default:a(()=>[o(r,{modelValue:t.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.password=s),type:"password",onKeyup:e[3]||(e[3]=c(s=>i(l.value),["enter"]))},null,8,["modelValue"])]),_:1}),o(p,{class:"center"},{default:a(()=>[o(g,{type:"primary",onClick:e[4]||(e[4]=s=>y())},{default:a(()=>e[6]||(e[6]=[w("注册")])),_:1}),o(g,{type:"primary",onClick:e[5]||(e[5]=s=>i(l.value))},{default:a(()=>e[7]||(e[7]=[w("登陆")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[E,u.value]])])}}}),le=j(H,[["__scopeId","data-v-76f977eb"]]);export{le as default};
